RecReading = true

campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 9,
        "fields": {
            "year": 1996,
            "summary": "<p>The Democrats have suffered routine humiliations since the loss of Carter. Burned on the traditional liberalism of Kennedy and Humphrey and burned on the Third Way centrism of Clinton, they're a carcass of what they once were. A strong congressional majority is only so much, they yearn for a great man. Who'll lead the charge?</p><p>A feeling of malaise and apathy coat the gentrified landscape. Beyond the backyards and driveways, cities and trailer parks, a curious sense of unease pierces the American mind. Where do we go from here?</p>",
            "image_url": "https://i.imgur.com/vijVE3F.jpeg",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://i.imgur.com/szybKU2.jpeg",
            "recommended_reading": "<div style='overflow-y:scroll;height:400px;'><h4 style=\\\"margin-top: 0.5em;\\\"><h4>Ted Turner</h4><a href=\"https://archive.org/details/tedturneritainta00bibb\" target=”_blank”>Porter Bibb - <i>It Ain't as Easy as It Looks</i> (1993)</a></br><a href=\"https://archive.org/details/callmeted0000turn_m6c2\" target=”_blank”>Bill Burke & Ted Turner - <i>Call Me Ted</i> (2008)</a></br><a href=\"https://www.goodreads.com/en/book/show/50157946\" target=”_blank”>Lisa Napoli - <i>Up All Night: Ted Turner, CNN, and the Birth of 24-Hour News</i> (2020)</a></br><h4>Newt Gingrich</h4><a href=\"https://archive.org/details/contractwithamer00ging\" target=”_blank”>Newt Gingrich, Dick Armey et al. - Contract with America: <i>The Bold Plan by Rep. Newt Gingrich, Rep. Dick Armey and the House Republicans to Change the Nation</i> (1994)</a></br><a href=\"https://www.goodreads.com/en/book/show/2614973\" target=”_blank”>Steven M. Gillon - <i>The Pact: Bill Clinton, Newt Gingrich, and the Rivalry that Defined a Generation</i> (2008)</a></br><a href=\"https://www.goodreads.com/en/book/show/52739194\" target=”_blank”>Julian E. Zelizer - <i>Burning Down the House: Newt Gingrich, the Fall of a Speaker, and the Rise of the New Republican Party</i> (2020)</a><p><h2>Canon Map</h2><img src='https://i.imgur.com/cQ5zndt.png' width='450px'></img></p></div>",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/2012-no-majority.jpg",
            "display_year": "1996 - Mouths of the South"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 78,
        "fields": {
            "first_name": "Ted",
            "last_name": "Turner",
            "election": 9,
            "party": "Democratic",
            "state": "Georgia",
            "priority": 2,
            "description": "<p>He's a larger than life figure who has, in just the last two decades, completely conquered American pop culture. Be it in sports, news, wrestling, cable television, film, he's done it all and planted his name right on it all. Everybody knows Ted Turner. It was only a matter of time until he entered politics.</p><p>Only thing is there's more to politics than branding and marketing, you have to have defined positions. Turner, as of late, is a political chameleon. Sure, his position on environmentalism is clear as day, same with nuclear proliferation and even abortion. But on everything else, he's all over the place. Digging past the many, many controversial statements, you have an (alleged) atheist married to Jane Fonda who has attacked unions, fired employees for smoking outside of work, run defense for China and Cuba, and has some, rather intesting opinions on overpopulation. But doesn't America just love a character?</p>",
            "color_hex": "#1a9cff",
            "secondary_color_hex": "#90C0FF",
            "is_active": 1,
            "image_url": "https://i.imgur.com/muipyXM.jpeg",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2000 election.</h3><p>Though it was perhaps expected, you could have easily faltered at a number of points. Credit to you for pulling through.</p><p>On the political front, you can continue the Clinton legacy and strengthen Social Security for generations to come. Perhaps you can succeed on health care where Clinton came up short? Or maybe you can create a future of renewable energy for America. Just be wary of a (George or Jeb?) Bush challenge in 2004.</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2000 election.</h3><p>Surely the second-guessing will be intense, but if things were close you could probably run again in 2004.</p><p>It seems that with George W. Bush and a Republican majority, the United States can expect some conservative policy-making over the next four years. Hopefully Bush comes through on his promise to govern in a bipartisan, conciliatory manner. A lot should depend on the margin of his victory, and whether it was large or small.</p>",
            "no_electoral_majority_message": "<h3>Sorry! You have lost in a squeaker.</h3><p>No candidate achieved a majority of the electoral votes, for the first time since 1824. Unfortunately for you, a majority of states have Republican controlled congressional delegations.</p><p>It seems that with George W. Bush and a Republican majority, the United States can expect some conservative policy-making over the next four years. Hopefully Bush comes through on his promise to govern in a bipartisan, conciliatory manner.</p>",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 79,
        "fields": {
            "first_name": "Ross",
            "last_name": "Perot",
            "election": 9,
            "party": "Reform",
            "state": "Texas",
            "priority": 3,
            "description": "",
            "color_hex": "#d313ec",
            "secondary_color_hex": "#A1FFA1",
            "is_active": 0,
            "image_url": "https://i.imgur.com/BTPub9f.jpeg",
            "electoral_victory_message": "",
            "electoral_loss_message": "",
            "no_electoral_majority_message": "",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 80,
        "fields": {
            "first_name": "Ralph",
            "last_name": "Nader",
            "election": 9,
            "party": "Independent",
            "state": "Connecticut",
            "priority": 4,
            "description": "",
            "color_hex": "#46d609",
            "secondary_color_hex": "#3ba80c",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/ralph-nader-2000.jpg",
            "electoral_victory_message": "",
            "electoral_loss_message": "",
            "no_electoral_majority_message": "",
            "description_as_running_mate": "''",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
      "model": "campaign_trail.candidate",
      "pk": 85,
      "fields": {
          "first_name": "Herb",
          "last_name": "Kohl",
          "election": 9,
          "party": "Democratic",
          "state": "Wisconsin",
          "priority": 9,
          "description": "<p>Kohl is your standard Democrat, and a great choice for your number two. He helps diversify the ticket, complementing your southern bombast with an air of midwest cool. A popular politician in his home state, he's made his career out of fighting for their interests specifically, especially when it comes to the dairy industry and in criticizing NAFTA.</p><p>With Kohl, you've got a good fighting chance at the Rust Belt. While he's not the most progressive or liberal member of the Democratic caucus, you're more likely to see him with Joe Lieberman than someone like Dianne Feinstein, he makes up for it in being relatively inoffensive. Plus, you and he would make this the first presidential ticket in history to be headlined by two basketball team owners.",
          "color_hex": "#148eff",
          "secondary_color_hex": "#90C0FF",
          "is_active": 0,
          "image_url": "https://i.imgur.com/Pweyc54.jpeg",
          "electoral_victory_message": "''",
          "electoral_loss_message": "''",
          "no_electoral_majority_message": "''",
          "description_as_running_mate": "<p>Kohl is your standard Democrat, and a great choice for your number two. He helps diversify the ticket, complementing your southern bombast with an air of midwest cool. A popular politician in his home state, he's made his career out of fighting for their interests specifically, especially when it comes to the dairy industry and in criticizing NAFTA.</p><p>With Kohl, you've got a good fighting chance at the Rust Belt. While he's not the most progressive or liberal member of the Democratic caucus, you're more likely to see him with Joe Lieberman than someone like Dianne Feinstein, he makes up for it in being relatively inoffensive. Plus, you and he would make this the first presidential ticket in history to be headlined by two basketball team owners.",
          "candidate_score": 0,
          "running_mate": true
        }
    },
    {
      "model": "campaign_trail.candidate",
      "pk": 86,
      "fields": {
          "first_name": "Jesse",
          "last_name": "Jackson",
          "election": 9,
          "party": "Democratic",
          "state": "Washington, D.C.",
          "priority": 9,
          "description": "<p>Jackson is a progressive icon, and a modern civil rights champion. His activist base could only prove advantagous to your campaign. Perhaps in Clinton having given him the cold shoulder back in '92, that's what cost him the election? Or at least contributed? These thoughts quickly bounce from and out your mind.</p><p>There are issues, however. He's not an elected official, in fact he's only slightly more experienced politically than you are and that's only due to his years of campaigning and activism. Hearing someone be called a “professional activist” is also not ideal for a Democratic ticket. His relationship with you can be pretty frosty, but nothing that would prove too bad a hinderance.",
          "color_hex": "#148eff",
          "secondary_color_hex": "#90C0FF",
          "is_active": 0,
          "image_url": "https://i.imgur.com/HQb5Do3.jpeg",
          "electoral_victory_message": "''",
          "electoral_loss_message": "''",
          "no_electoral_majority_message": "''",
          "description_as_running_mate": "<p>Jackson is a progressive icon, and a modern civil rights champion. His activist base could only prove advantagous to your campaign. Perhaps in Clinton having given him the cold shoulder back in '92, that's what cost him the election? Or at least contributed? These thoughts quickly bounce from and out your mind.</p><p>There are issues, however. He's not an elected official, in fact he's only slightly more experienced politically than you are and that's only due to his years of campaigning and activism. Hearing someone be called a “professional activist” is also not ideal for a Democratic ticket. His relationship with you can be pretty frosty, but nothing that would prove too bad a hinderance.",
          "candidate_score": 0,
          "running_mate": true
        }
    },
    {
      "model": "campaign_trail.candidate",
      "pk": 87,
      "fields": {
          "first_name": "John",
          "last_name": "Kerry",
          "election": 9,
          "party": "Democratic",
          "state": "Massachusetts",
          "priority": 9,
          "description": "<p>Kerry is the safe pick, the safest of the picks you've got lined up. He's inoffensive to a fault, though he can easily be spun into a coastal elitist of such proportions that even Georgia might just drop you. Keep him away from select parts of the country and you figure he'll work just fine.</p><p>A Vietnam veteran, he's a decorated war hero, but famously was against the war itself. It seems you have a knack for attracting such personalities. This would likely be Kerry's weakest spot if picked for the role however, especially in association with your wife, the potential First Lady. Doubtless, though, you can overcome such handicaps and turn this Yankee blue blood into a diamond.",
          "color_hex": "#148eff",
          "secondary_color_hex": "#90C0FF",
          "is_active": 0,
          "image_url": "https://i.imgur.com/x09Wj1b.jpeg",
          "electoral_victory_message": "''",
          "electoral_loss_message": "''",
          "no_electoral_majority_message": "''",
          "description_as_running_mate": "<p>Kerry is the safe pick, the safest of the picks you've got lined up. He's inoffensive to a fault, though he can easily be spun into a coastal elitist of such proportions that even Georgia might just drop you. Keep him away from select parts of the country and you figure he'll work just fine.</p><p>A Vietnam veteran, he's a decorated war hero, but famously was against the war itself. It seems you have a knack for attracting such personalities. This would likely be Kerry's weakest spot if picked for the role however, especially in association with your wife, the potential First Lady. Doubtless, though, you can overcome such handicaps and turn this Yankee blue blood into a diamond.",
          "candidate_score": 0,
          "running_mate": true
        }
    },
    {
      "model": "campaign_trail.candidate",
      "pk": 77,
      "fields": {
          "first_name": "Newt",
          "last_name": "Gingrich",
          "election": 9,
          "party": "Republican",
          "state": "Georgia",
          "priority": 1,
          "description": "<p>Elected to Congress in the wake of Watergate, after multiple earlier attempts that were foiled thanks to Nixon and Ford's bumbling antics, Newt Gingrich has long been familiar with the perils behind a diminished Republican brand. He's the brains behind the conservative apparatus of the party, and he couldn't be more furious. It's clear, he now recognizes, the party has squandered a golden opportunity, possibly one that it won't see for another lifetime. Bush isn't awful, certainly he could be much worse, but it's become clear he is dead weight and a lame duck we'd have been better off with having lost back in 1992.</p><p>Now, the Democrats have regained their strength in Congress and regrouped. Everybody thinks they're demotivated and doomed, but you know better. You just can't stand on the sidelines collecting cobwebs playing the waiting game for the next opportunity to arrive, you need to pull this party back together yourself lest we surrender ourselves to unshackled socialism. If there's a man who's up for the task, it's Gingrich.</p>",
          "color_hex": "#f91010",
          "secondary_color_hex": null,
          "is_active": 0,
          "image_url": "https://i.imgur.com/rVjdhW7.jpeg",
          "electoral_victory_message": "",
          "electoral_loss_message": "",
          "no_electoral_majority_message": "",
          "description_as_running_mate": null,
          "candidate_score": 1,
          "running_mate": false
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 52,
        "fields": {
            "candidate": 78,
            "running_mate": 85
        }
    },
    {
      "model": "campaign_trail.running_mate",
      "pk": 53,
      "fields": {
            "candidate": 78,
            "running_mate": 86
        }
    },
    {
      "model": "campaign_trail.running_mate",
      "pk": 54,
      "fields": {
            "candidate": 78,
            "running_mate": 87
        }
    },
]

campaignTrail_temp.credits = "Accurate_Feature9970<br>Special thanks to NightlyGothic for playtesting and Nina for code consultation<br>2000N for Music Player"

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 9,
        "candidates": [
            78,
            79,
            80,
            77
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 9,
        "candidates": [
            78,
            79,
            80,
            77
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 9,
        "year": 1996,
        "is_premium": 0,
        "display_year": "1996 - Mouths of the South"
    }
]

jet_data = {
    "headerColor": "#9e1362",
    "windowColor": "#3c4f7a",
    "containerColor": "#582466",
    "innerWindowColor": "#1ec5e6",
    "bannerImageUrl": "https://i.imgur.com/ScGBmPE.jpeg",
    "backgroundImageUrl": "https://i.imgur.com/3p3GMG2.jpeg",
    "endingTextColor": "#000000",
    "gameTitle": "MOUTHS OF THE SOUTH"
}

campaignTrail_temp.modBoxTheme = {
  "header_color": "#cc0000",
  "header_text_color": "#ffffff",
  "description_text_color": "#000000",
  "description_background_color": "#ffffff",
  "main_color": "#cc0000",
  "secondary_color": "#282828",
  "ui_text_color": "#ffffff"
}

//#startcode


corrr = '\n              <h2>MOUTHS OF THE SOUTH</h2>\n            ';


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#cc0000";

$("#game_window")[0].style.backgroundImage = "url(https://i.imgur.com/apejvCD.jpeg)"

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#000000";

document.getElementById("header").src = "https://i.imgur.com/ScGBmPE.jpeg";

document.body.background = "https://i.imgur.com/3p3GMG2.jpeg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#cc0000!important;}</style>";

setInterval(changeFontColour, 200)

function changeFontColour() {
  if (document.getElementById('final_results_description') != null) {
      document.getElementById('final_results_description').style.color = "white"
  }
}

//#endcode

HistHexcolour=["#1a9cff","#f91010","#d313ec","#46d609"];
HistName=[" Ted Turner"," Newt Gingrich"," Ross Perot", " Ralph Nader"];
HistEV=[317,221,0,0];
HistPV=["50,795,219","50,229,809","4,613,604","365,954"];
HistPVP=["47.9%","47.4%","4.4%","0.3%"];

campaignTrail_temp.achievements = {
"Captain Planet" : {
      "image" : "https://i.imgur.com/RIvPKfy.jpeg",
      "description" : "Win over 350 electoral votes.",
      "cannotBeCheated" : true
},
"Captain Outrageous" : {
      "image" : "https://i.imgur.com/FNgglZX.jpeg",
      "description" : "Get zero electoral votes.",
      "cannotBeCheated" : true
},
"Barbarella Goes to Washington" : {
    "image" : "https://i.imgur.com/QQ4tx7R.jpeg",
    "description" : "Keep Jane Fonda happy with your campaign until the very end and win.",
    "cannotBeCheated" : true
},
"My True Love, Teddy Jr." : {
  "image" : "https://i.imgur.com/RINxsYQ.jpeg",
  "description" : "Return back to your Montana ranch.",
  "cannotBeCheated" : true
},
"Most Trusted Name in News" : {
  "image" : "https://i.imgur.com/tXiB53U.jpeg",
  "description" : "Have your opponents' October Surprises leak but not yours.",
  "cannotBeCheated" : true
},
"Of Cavaliers and Cotton Fields" : {
  "image" : "https://i.imgur.com/mXBBt9i.jpeg",
  "description" : "Agree to a backroom deal with Newt Gingrich.",
  "cannotBeCheated" : true
},
"The Super-Rich Have Saved Us!" : {
  "image" : "https://i.imgur.com/K57qJy6.jpeg",
  "description" : "Have Ralph Nader agree to serve in your potential administration.",
  "cannotBeCheated" : true
},
"No Chance in Hell" : {
  "image" : "https://i.imgur.com/VLGcRRD.jpeg",
  "description" : "Face an old foe in the general election.",
  "cannotBeCheated" : true
},
"Jesus Freaks" : {
  "image" : "https://i.imgur.com/L389G83.jpeg",
  "description" : "Win the election even after declaring you're an atheist.",
  "cannotBeCheated" : true
},
"I'll Eat Bison, You Can Eat Crow" : {
  "image" : "https://i.imgur.com/dTPgyf5.jpeg",
  "description" : "Win Montana.",
  "cannotBeCheated" : true
}
}

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#cc0000;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#cc0000;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      musicBox.children[2].currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}

// Track list

var soundtracks = {
  0: {
    name: "Opening",
    tracklist: [
      {
        name: "He's a Rebel - The Crystals",
        url: "https://file.garden/ZfEj4RRLOwjmdfp6/TheCrystals-HesARebel1962.mp3",
      },
    ],
  },
  1: {
    name: "Tracklist",
    tracklist: [
      {
        name: "Neon Wilderness - The Verve",
        url: "https://file.garden/ZfEj4RRLOwjmdfp6/Neon%20Wilderness.mp3",
      },
      {
        name: "Circles - Soul Coughing",
        url: "https://file.garden/Zd8F-7mXyXjgTDST/Circles.mp3",
      },
      {
        name: "Crash (The '95 Mix) - The Primitives",
        url: "https://file.garden/ZeZ2Dxo9KEiz9e_I/Crash.mp3",
      },
      {
        name: "Pepper - Butthole Surfers",
        url: "https://file.garden/ZeZ2Dxo9KEiz9e_I/Pepper.mp3",
      },
      {
        name: "The Alternative Polka - 'Weird Al' Yankovic",
        url: "https://file.garden/Zdy7s7wq23DtYAm3/TAP%20(BH).mp3",
      },
    ],
  },
}
newMusicPlayer()